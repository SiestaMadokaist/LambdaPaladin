<html>
<head><title>img</title></head>
<style>
    div, img, body{
        margin: 0;
    }   
    span{
        margin-left: 10px;
    }    
    input[type="text"]{
        margin-top: 15px;
        margin-bottom: 15px;
        margin-left: 20px;
        height: 30px;        
    }
</style>
<body>
    <div id="image" style="float:left">
        <img src="/chess" alt="" onContextMenu="return false">        
    </div> 
    <div style="float:left">
        <div><input placeholder="x0 = " type="text" id="x0"></div>
        <div><input placeholder="y0 = " type="text" id="y0"></div>
        <div><input placeholder="x1 = " type="text" id="x1"></div>
        <div><input placeholder="y1 = " type="text" id="y1"></div>
    </div>
    <div style="margin:15px; float:left">
        <img id="hello" src="hello.jpg" alt="">
    </div>
    <script>
        var baseURL = "http://localhost:5000"
        function setIdValue(id, val){
            document.getElementById(id).value = id + " =  " + val
        }
        function getIdValue(id){
            return document.getElementById(id).value.split("=")[1].trim()
        }
        function refreshImage(){
            var imhello = document.getElementById("hello")
            var values = ["x0", "y0", "x1", "y1"].map(getIdValue)
            var targetURL = baseURL + "/" + values.join("/")            
            var xmlhttp = new XMLHttpRequest()            
            xmlhttp.open("GET", targetURL, false)
            xmlhttp.send(null)            
            imhello.src = "/hello?timestamp=" + new Date().getTime();            
        }
        function onLeftClick(e){            
            setIdValue("x0", e.clientX)
            setIdValue("y0", e.clientY)        
            refreshImage()                
        }
        function onRightClick(e){
            setIdValue("x1", e.clientX)
            setIdValue("y1", e.clientX)                            
            refreshImage()
        }
        var im = document.getElementById("image")
        im.addEventListener("click", onLeftClick, false)
        im.addEventListener("contextmenu", onRightClick, false)
    </script>
</body>
</html>